# Databricks Asset Bundle configuration
bundle:
  name: "PROJECT_NAME"  # Replace with your project name

########## Variables - Configure these to match your environment ##########

variables:
  catalog_name:
    description: "The name of the catalog to deploy to"
    default: "my_catalog"  # Replace with your catalog name

  schema_name:
    description: "The name of the schema to deploy to"
    default: "my_schema"  # Replace with your schema name

########## End of Variables ##########

targets:
  dev:
    default: true
    presets:
      source_linked_deployment: true

# See more about resource configuration at https://docs.databricks.com/aws/en/dev-tools/bundles/resources
resources:

  schemas:
    main_schema:
      name: ${var.schema_name}
      catalog_name: ${var.catalog_name}
      comment: This schema was created by Databricks Asset Bundles.

  pipelines:
    main_pipeline:
      name: "${workspace.current_user.userName} - ${bundle.name} Pipeline"
      catalog: ${var.catalog_name}
      schema: ${var.schema_name}
      configuration:
        catalog_name: ${var.catalog_name}
        schema_name: ${var.schema_name}
      libraries:
        - notebook:
            path: "src/pipelines/basic_pipeline.py"
      serverless: true
      photon: true
      development: true

# For more options and schema, see: https://docs.databricks.com/aws/en/dev-tools/bundles/settings
